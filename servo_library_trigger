#include <Servo.h>

Servo myservo;  // 서보모터 객체 생성

int initialAngle = 90;
int currentAngle = 90;
int angleChange = -37.5;  // 30도 변경 값

void setup() {
  Serial.begin(9600);
  myservo.attach(9);  // 서보모터 핀 9에 연결
  myservo.write(initialAngle);  // 초기 위치 설정

  Serial.println("Enter any value to rotate servo 30 degrees and then return to initial position after 1 second:");
}

void loop() {
  if (Serial.available()) {
    while (Serial.available() > 0) {
      Serial.read();  // 입력 버퍼 비우기
    }

    // 서보모터 30도 회전
    currentAngle = initialAngle + angleChange;
    myservo.write(currentAngle);
    Serial.print("Moved to: ");
    Serial.print(currentAngle);
    Serial.println(" degrees");

    // 1초 대기
    delay(400);

    // 서보모터 초기 위치로 복귀
    myservo.write(initialAngle);
    Serial.print("Returned to: ");
    Serial.print(initialAngle);
    Serial.println(" degrees");

    // 입력 안내 메시지 다시 출력
    Serial.println("Enter any value to rotate servo 30 degrees and then return to initial position after 1 second:");
  }
}
